# Render Deployment - Password Reset Setup

## Quick Setup Guide for Render.com

### Step 1: Get Your Gmail App Password

1. Go to your Google Account: https://myaccount.google.com/security
2. Enable **2-Step Verification** (if not already enabled)
3. Go to **App Passwords**: https://myaccount.google.com/apppasswords
4. Select "Mail" and your device
5. Click "Generate" and copy the 16-character password

### Step 2: Add Environment Variables in Render

1. Go to your Render Dashboard: https://dashboard.render.com
2. Select your **it-ojt-platform** service
3. Go to **Environment** tab
4. Add these new variables:

| Key | Value | Notes |
|-----|-------|-------|
| `EMAIL_SERVICE` | `gmail` | Already in render.yaml |
| `EMAIL_USER` | `your-email@gmail.com` | Your Gmail address |
| `EMAIL_PASSWORD` | `your-16-char-password` | The app password from Step 1 |
| `CLIENT_URL` | `https://it-ojt-platform.onrender.com` | Your Render app URL |

**Important:** Replace `https://it-ojt-platform.onrender.com` with your actual Render URL!

### Step 3: Verify Existing Variables

Make sure these are already set (they should be):
- ✅ `MONGODB_URI` - Your MongoDB connection string
- ✅ `JWT_SECRET` - Auto-generated by Render
- ✅ `SESSION_SECRET` - Auto-generated by Render
- ✅ `CORS_ORIGIN` - Should match your CLIENT_URL

### Step 4: Deploy

After adding the environment variables:
1. Render will automatically redeploy
2. Or click **Manual Deploy** → **Deploy latest commit**

### Step 5: Test

1. Go to your Render app URL
2. Click "Forgot Password?" on the login page
3. Enter a registered email
4. Check your email for the reset link
5. Click the link and reset your password

## Troubleshooting

### Email not sending?

**Check Render Logs:**
```
Dashboard → Logs → Look for email errors
```

**Common Issues:**
- ❌ Wrong app password (must be 16-char from Google App Passwords)
- ❌ 2-Step Verification not enabled
- ❌ Using regular Gmail password instead of app password
- ❌ EMAIL_USER doesn't match the Gmail account

### Reset link not working?

**Verify CLIENT_URL:**
- Must start with `https://`
- Must match your Render app URL exactly
- No trailing slash

Example: `https://your-app-name.onrender.com`

### Still not working?

**Check logs for these errors:**
- "Invalid credentials" → Wrong email/password
- "Authentication failed" → Check 2-Step Verification
- "ENOTFOUND" → Check EMAIL_SERVICE is "gmail"

## Security Notes

✅ **Never commit EMAIL_PASSWORD to git**
✅ **Use environment variables only**
✅ **App passwords are safer than regular passwords**
✅ **Tokens expire in 1 hour**

## Your Render App URL

Find your app URL in Render Dashboard:
- Go to your service
- Look at the top: `https://[your-service-name].onrender.com`
- Use this exact URL for `CLIENT_URL`

## Example Configuration

```env
# Add these to Render Environment Variables
EMAIL_SERVICE=gmail
EMAIL_USER=yourapp@gmail.com
EMAIL_PASSWORD=abcd efgh ijkl mnop  # 16 characters from Google
CLIENT_URL=https://it-ojt-platform.onrender.com  # Your actual URL
```

## Testing on Production

After deployment, test the flow:
1. Open your Render app
2. Click "Forgot Password?"
3. Enter an existing user email
4. Check the email inbox
5. Click the reset link
6. Set new password
7. Login with new password

---

Need help? Check the Render logs for detailed error messages!
